name: Generate Sample List

on:
  push:
    branches:
      - main  # or any branch you want to target

jobs:
  generate_file_list:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.x'  # Specify the Python version

    - name: Install dependencies
      run: pip install -r requirements.txt || true  # Assuming no dependencies for this script

    - name: Run file list generation script
      run: python generate_file_list.py  # This runs your Python script

    - name: Commit changes
      run: |
        git config --local user.email "kristjan.kristmannsson@gmail.com"
        git config --local user.name "k09"
        git add strudel.json
        git commit -m "Update file list"
        git push
